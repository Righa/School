{% extends 'admin-dash.html' %}


{% block pagedata %}
{% if action=='create' %}

<div class="row">
	<div class="col p-3">
		<a class="btn float-right btn-outline-info mr-3" href="{{ url_for('exams') }}"><i class="fas fa-list"></i> VIEW EXAMS</a>
	</div>
</div>
<div class="row">
	<div class="col">
		<div class="card p-3">
			<div class="card-body text-primary">
				<h1 class="card-title text-info">Capture outcomes</h1>
			</div>
			<div class="card table-responsive">
				<table class="table table-hover table-sm card-body">
					<tr>
						<th>Student</th>
						<th>Check to edit</th>
						{% for question in exam.questions %}
						<th>Question {% print(question.number) %}</th>
						{% endfor %}
					</tr>
					{% for student in exam.group.students %}

					<tr>
						<form method="post">
							{{ form.hidden_tag() }}

							<input type="hidden" name="student_id" value="{% print(student.id) %}">

							<td>{% print(student.first_name) %} {% print(student.middle_name) %} {% print(student.last_name) %}</td>
							<td>
								<div class="custom-control custom-checkbox my-1 mr-sm-2">
								    <input type="checkbox" class="custom-control-input" id="{% print(student.id) %}-check" onchange="toggleForm('{% print(student.id) %}')">
								    <label class="custom-control-label" for="{% print(student.id) %}-check">Edit</label>
								</div>
							</td>

							{% for question in exam.questions %}
								<td class="{% print(student.id) %}-view">
									{%print('-')%}
									{% for score in question.scores %}
										{% if score.student_id == student.id %}
											{% print(score.value) %}
											{% set found = 1 %}
										{% endif %}
									{% endfor %}
									{%print('-')%}
								</td>
								<td class="{% print(student.id) %}-edit d-none">
									{{ form.scores[question.number-1](class='form-control hidden') }}
								</td>
							{% endfor %}

							<td>{{ form.submit(class='btn btn-info')}}</td>
						</form>
					</tr>
					{% endfor %}
				</table>
			</div>
		</div>
	</div>
</div>

{% endif %}
{% endblock %}
